{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/keep/source/css/font-awesome.min.css","path":"css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/keep/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/keep/source/images/bg.svg","path":"images/bg.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes/keep/source/images/loading.svg","path":"images/loading.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/images/logo.svg","path":"images/logo.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/js/back2top.js","path":"js/back2top.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/code-copy.js","path":"js/code-copy.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/dark-light-toggle.js","path":"js/dark-light-toggle.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/header-shrink.js","path":"js/header-shrink.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/lazyload.js","path":"js/lazyload.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/left-side-toggle.js","path":"js/left-side-toggle.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/toc.js","path":"js/toc.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.eot","path":"webfonts/fa-brands-400.eot","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.svg","path":"webfonts/fa-brands-400.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.ttf","path":"webfonts/fa-brands-400.ttf","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff","path":"webfonts/fa-brands-400.woff","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff2","path":"webfonts/fa-brands-400.woff2","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.eot","path":"webfonts/fa-regular-400.eot","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.svg","path":"webfonts/fa-regular-400.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff","path":"webfonts/fa-regular-400.woff","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.ttf","path":"webfonts/fa-regular-400.ttf","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff2","path":"webfonts/fa-regular-400.woff2","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.eot","path":"webfonts/fa-solid-900.eot","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.svg","path":"webfonts/fa-solid-900.svg","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.ttf","path":"webfonts/fa-solid-900.ttf","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff","path":"webfonts/fa-solid-900.woff","modified":1,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff2","path":"webfonts/fa-solid-900.woff2","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/animated.styl","path":"css/common/animated.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/basic.styl","path":"css/common/basic.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/keep-theme.styl","path":"css/common/keep-theme.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/markdown.styl","path":"css/common/markdown.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/variables.styl","path":"css/common/variables.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/archive-content.styl","path":"css/layout/archive-content.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/article-content.styl","path":"css/layout/article-content.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/category-content.styl","path":"css/layout/category-content.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/category-list.styl","path":"css/layout/category-list.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/home-content.styl","path":"css/layout/home-content.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/page.styl","path":"css/layout/page.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/layout/tag-content.styl","path":"css/layout/tag-content.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/js/libs/anime.min.js","path":"js/libs/anime.min.js","modified":1,"renderable":1},{"_id":"themes/keep/source/js/libs/pjax.min.js","path":"js/libs/pjax.min.js","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/code-theme.styl","path":"css/common/codeblock/code-theme.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/copy-code.styl","path":"css/common/codeblock/copy-code.styl","modified":1,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/highlight.styl","path":"css/common/codeblock/highlight.styl","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"5a946399b4911154f7027086d30418597ba32e0a","modified":1621843864127},{"_id":"source/_posts/搭建订阅转换服务的一次记录.md","hash":"323c1e7620e7df9e5f1756ddeaaf870629c0e2f7","modified":1624042161567},{"_id":"source/_posts/配置Mosh的一次记录.md","hash":"5a3bbd898ae33812c6e6a25ebbee2878698c8c26","modified":1623927752859},{"_id":"themes/keep/.editorconfig","hash":"26a27140a04ad1873639b19f8240fb2bae367878","modified":1621854357867},{"_id":"themes/keep/.gitignore","hash":"9f5eebec6128f0029691c28190673d959cb0f234","modified":1621854357868},{"_id":"themes/keep/LICENSE","hash":"c6b9025c1a23ad625f9a151f51d55c82d7197d04","modified":1621854357868},{"_id":"themes/keep/README.md","hash":"b6ba7b8340befd417eed0de655f2bb6beaa1ee91","modified":1621854357869},{"_id":"themes/keep/README_zh-CN.md","hash":"def1e590f03786a880a91095c9be975b56b670b6","modified":1621854357869},{"_id":"themes/keep/_config.yml","hash":"f98b33d0b69774a022eaa435bda5bcd22d7e5506","modified":1624031401120},{"_id":"themes/keep/package.json","hash":"e32928dcc246316818f41147a13cccf3ae9acb16","modified":1621854357895},{"_id":"themes/keep/languages/en.yml","hash":"11902f5813fc994a0620580d3caecad0bd4f4bec","modified":1621854357871},{"_id":"themes/keep/languages/zh-CN.yml","hash":"eeae69704efe5b3fa05306505fa28efca7e49ccb","modified":1621854357872},{"_id":"themes/keep/layout/archive-content.ejs","hash":"89e256133a128858702f3bd0a6cf8330f5a8f2f7","modified":1621854357887},{"_id":"themes/keep/layout/archive.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1621854357887},{"_id":"themes/keep/layout/article-content.ejs","hash":"91a45d3237b89c94272d493872e2fa49cca11b20","modified":1621854357888},{"_id":"themes/keep/layout/category-content.ejs","hash":"9293aba389c0664335b3308cbb343e603ff1f24f","modified":1621854357889},{"_id":"themes/keep/layout/category-list.ejs","hash":"17ea257cb28fb63c1e1650c157541d90a4f7fba5","modified":1621854357889},{"_id":"themes/keep/layout/category.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1621854357890},{"_id":"themes/keep/layout/home-content.ejs","hash":"c6897b9a1f88f157bf9cb935fba43a13911871eb","modified":1621854357890},{"_id":"themes/keep/layout/index.ejs","hash":"d04b5608fc801f00e247e7355c89a8643dc76914","modified":1621854357891},{"_id":"themes/keep/layout/layout.ejs","hash":"a2d3f1ee6a79810de41d80b80c087f675f86ef84","modified":1621854357892},{"_id":"themes/keep/layout/page.ejs","hash":"ad0d0452ee61277805ac30c8d97b9bdd3d09cf89","modified":1621854357893},{"_id":"themes/keep/layout/tag-content.ejs","hash":"379fad48764e11d7962f7cec730b0a6e932ef4a3","modified":1621854357893},{"_id":"themes/keep/layout/tag.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1621854357894},{"_id":"themes/keep/layout/tags.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1621854357894},{"_id":"themes/keep/scripts/use-source-data.js","hash":"0dcab564f400e1775af8e839d9f1a219d0c003bb","modified":1621854357899},{"_id":"themes/keep/layout/_partial/archive-list.ejs","hash":"c51a44fd234c7bc5e265f6c0afe3b4c9ca665b0c","modified":1621854357873},{"_id":"themes/keep/layout/_partial/article-copyright-info.ejs","hash":"2fec371f5b6f97cc6fc242aced9baacce93a6f86","modified":1621854357874},{"_id":"themes/keep/layout/_partial/article-meta-info.ejs","hash":"7bbdce45a7fa5a5d884fc63f2b44fe5bd7bc4293","modified":1621854357874},{"_id":"themes/keep/layout/_partial/first-screen.ejs","hash":"e28d781dd6868b08e9007393495fae75c6e502aa","modified":1621854357878},{"_id":"themes/keep/layout/_partial/footer.ejs","hash":"23a8a53cfa0b3d050ba040e8753d909dbb32b892","modified":1621854357878},{"_id":"themes/keep/layout/_partial/friends-link.ejs","hash":"e659c6a12c80ebf0cbe9f38a58425248702f8d2f","modified":1621854357879},{"_id":"themes/keep/layout/_partial/head.ejs","hash":"31da3892b805143eca3d2f8abb1c56ea50298657","modified":1621854357879},{"_id":"themes/keep/layout/_partial/header.ejs","hash":"bb57e24ef7005175824f19ff4cb8537ce4771590","modified":1621854357880},{"_id":"themes/keep/layout/_partial/home-article-meta-info.ejs","hash":"f26d28c92ca79287d45cf20da6fdb0f68815c655","modified":1621854357880},{"_id":"themes/keep/layout/_partial/image-viewer.ejs","hash":"c30d3f046035b6c63ee90fc961f67cbc2d6073af","modified":1621854357881},{"_id":"themes/keep/layout/_partial/local-search.ejs","hash":"747cd0ac75f31c9837abcbf5e06eac5501089d96","modified":1621854357881},{"_id":"themes/keep/layout/_partial/page-template.ejs","hash":"adec4312027a76b5969e78a2dd245563e4e6333f","modified":1621854357882},{"_id":"themes/keep/layout/_partial/paginator.ejs","hash":"4183e4991a30132010d6428c9b2c51d198d268d8","modified":1621854357882},{"_id":"themes/keep/layout/_partial/post-tools.ejs","hash":"44a271ffbfb3af5c715ab25777cc58ddf9f62f82","modified":1621854357884},{"_id":"themes/keep/layout/_partial/progress-bar.ejs","hash":"791c78e36e4191f5a738964d4fba545be2649cea","modified":1621854357884},{"_id":"themes/keep/layout/_partial/scripts.ejs","hash":"ea08752ab79d3c61e31fae9dd49afc0feff6f36a","modified":1621854357885},{"_id":"themes/keep/layout/_partial/side-tools.ejs","hash":"3439e47a03651a3540541ba85d9ab0c9b456fc04","modified":1621854357885},{"_id":"themes/keep/layout/_partial/tagcloud.ejs","hash":"3c1f80ec34a4db4d242b8b1c024ffa8de0ddac78","modified":1621854357886},{"_id":"themes/keep/layout/_partial/toc.ejs","hash":"27844ed7c138d907c25d0e198f5425fe0c0299b2","modified":1621854357886},{"_id":"themes/keep/scripts/filters/lazyload-handle.js","hash":"c62dc757815b23c04bfd9112136d39a7deb5709a","modified":1621854357896},{"_id":"themes/keep/scripts/filters/link-handle.js","hash":"4c8fd067eaf4cce4776413abe90a9ea3f1f04bc7","modified":1621854357897},{"_id":"themes/keep/scripts/helpers/export-config.js","hash":"9099191029226a04aa7e633920dc3458fef940e7","modified":1621854357898},{"_id":"themes/keep/scripts/helpers/helper.js","hash":"75fbc00fc237d8c7218762288d96d46f6270ed3c","modified":1621854357898},{"_id":"themes/keep/source/css/font-awesome.min.css","hash":"2c2236d61417d354b5cbbc907dfc9c0eb1325a7f","modified":1621854357906},{"_id":"themes/keep/source/css/style.styl","hash":"aebd99d9ad936eb216b5fc69d5f91efc8259d733","modified":1621854357924},{"_id":"themes/keep/source/images/bg.svg","hash":"fe49c289a1110973a1c089fe4a9565eb06ecc036","modified":1621854357926},{"_id":"themes/keep/source/images/favicon.ico","hash":"f8e6366200a6d100dbb81d59148f7dde704d1cdb","modified":1609654843000},{"_id":"themes/keep/source/images/loading.svg","hash":"7689011e66c78998d91784ae5abe680f76772589","modified":1621854357926},{"_id":"themes/keep/source/images/logo.svg","hash":"509c25b6e51d435b3acd6b0a85b823daf9a48363","modified":1621854357927},{"_id":"themes/keep/source/js/back2top.js","hash":"4be3dfc5ea5d134de22dddce950204c3fc05a659","modified":1621854357928},{"_id":"themes/keep/source/js/code-copy.js","hash":"0fa4f5c6b1b4fa2dd059a3fabd975cb5236aa68e","modified":1621854357928},{"_id":"themes/keep/source/js/dark-light-toggle.js","hash":"3941485684abdc9170f68b536c7cab57f03d68db","modified":1621854357929},{"_id":"themes/keep/source/js/header-shrink.js","hash":"5a95ba1079638342689aa31ae331b0ad29423cfb","modified":1621854357930},{"_id":"themes/keep/source/js/lazyload.js","hash":"9b1d7be063feff3a4268190575959a81604cef95","modified":1621854357930},{"_id":"themes/keep/source/js/left-side-toggle.js","hash":"2396af1662b0cc8bf525c7cfed2f212a752a3b20","modified":1621854357931},{"_id":"themes/keep/source/js/local-search.js","hash":"a76838dbc9b3dc683b7653d0e60c2a824316d598","modified":1621854357933},{"_id":"themes/keep/source/js/main.js","hash":"52f9e2ccb2b93399bf2480aac989c702484b8aec","modified":1621854357934},{"_id":"themes/keep/source/js/toc.js","hash":"089573f669c7eaae7b3b88a1f4b94c630983f520","modified":1621854357935},{"_id":"themes/keep/source/js/utils.js","hash":"cddc4b2d28a02b327e4b4d0401bbea80255fe9d3","modified":1621854357935},{"_id":"themes/keep/source/webfonts/fa-regular-400.eot","hash":"2baa9a8aa68f1d2d4712b3c7205f9105aaf21879","modified":1621854357955},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff","hash":"26afc29d39ab9fac6d0b607be7e76db093ff7c3a","modified":1621854357959},{"_id":"themes/keep/source/webfonts/fa-regular-400.ttf","hash":"d64e58981a419de52bac110c979887d34e366135","modified":1621854357958},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff2","hash":"fb9648469530a05fa9aac80e47d4d6960472a242","modified":1621854357960},{"_id":"themes/keep/layout/_partial/comment/comment.ejs","hash":"3567cb1acb984e13cf7b6ac047467298cd6e98e3","modified":1621854357875},{"_id":"themes/keep/layout/_partial/comment/gitalk.ejs","hash":"cff08caa0a70bf276500ccdbf2965865399d985b","modified":1621854357876},{"_id":"themes/keep/layout/_partial/comment/valine.ejs","hash":"1c58eb3e1f0bf06758787ff91c56924210de6665","modified":1621854357877},{"_id":"themes/keep/layout/_partial/pjax/pjax.ejs","hash":"db76ce10f71e0aed717c4734ef2efbdc4b860c16","modified":1621854357883},{"_id":"themes/keep/layout/_partial/comment/twikoo.ejs","hash":"5d75b54edfcfb6112ac2c50fa7f4040e3716261d","modified":1621854357876},{"_id":"themes/keep/source/css/common/animated.styl","hash":"064493c99c4d1d19803fc544251f4fbc491e7a1d","modified":1621854357901},{"_id":"themes/keep/source/css/common/basic.styl","hash":"d5e895ef58e342f5b74edc4803aad76dfb447517","modified":1621854357901},{"_id":"themes/keep/source/css/common/keep-theme.styl","hash":"48acc1b0b18b5c34d758118bad135b7cea18b5a1","modified":1621854357904},{"_id":"themes/keep/source/css/common/markdown.styl","hash":"73a96b2e7bdbaa1e98fd2a9928a05c56763d9064","modified":1621854357905},{"_id":"themes/keep/source/css/common/variables.styl","hash":"db80d2ad6d99267bbc13abe7b11660cae04cc023","modified":1621854357905},{"_id":"themes/keep/source/css/layout/archive-content.styl","hash":"254ca2715de67d5783adfae40723a7917b6d9f8a","modified":1621854357920},{"_id":"themes/keep/source/css/layout/article-content.styl","hash":"84aac4c31e9a8d9d6de0f7291ab0ae8ef9fddb00","modified":1621854357921},{"_id":"themes/keep/source/css/layout/category-content.styl","hash":"9af1e7fbc52aad0b4a47593813961a32a1d2b5c5","modified":1621854357921},{"_id":"themes/keep/source/css/layout/home-content.styl","hash":"029336439c79ece32d25f8fee9dc018206fbcd1b","modified":1621854357922},{"_id":"themes/keep/source/css/layout/page.styl","hash":"46f587c857e84095c9f49b9eb1ad23cdcdd33d27","modified":1621854357923},{"_id":"themes/keep/source/css/layout/category-list.styl","hash":"28ea212b14e664d08de4ce93db1e0153e48a11ed","modified":1621854357922},{"_id":"themes/keep/source/css/layout/tag-content.styl","hash":"73af0b51aee119b2135dc8cd53cd3a3ad215fff6","modified":1621854357924},{"_id":"themes/keep/source/js/libs/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1621854357932},{"_id":"themes/keep/source/js/libs/pjax.min.js","hash":"57ec40cb4898d7ba74a03603d608af378e5431f8","modified":1621854357933},{"_id":"themes/keep/source/css/common/codeblock/code-theme.styl","hash":"8b6131af54382b7959c255d58c52474564c91bf8","modified":1621854357902},{"_id":"themes/keep/source/css/common/codeblock/copy-code.styl","hash":"eac367ec543527a7533490fa19b451a452684614","modified":1621854357903},{"_id":"themes/keep/source/css/common/codeblock/highlight.styl","hash":"081f08ed399c4fc6227ab15109595a211693462b","modified":1621854357904},{"_id":"themes/keep/source/css/layout/_partial/archive-list.styl","hash":"e85adfdd6fd83d2529988da644df51ddffbc87f5","modified":1621854357908},{"_id":"themes/keep/source/css/layout/_partial/article-copyright-info.styl","hash":"ae286cb8c7e788a7d393774c9e9c394352e48e72","modified":1621854357909},{"_id":"themes/keep/source/css/layout/_partial/article-meta-info.styl","hash":"a00b390368064528a29bb8e2f086afdf5c59cd22","modified":1621854357910},{"_id":"themes/keep/source/css/layout/_partial/first-screen.styl","hash":"9422e7d052f9e8a81d5a9acf12af9670fe2c41bb","modified":1621854357914},{"_id":"themes/keep/source/css/layout/_partial/footer.styl","hash":"0610a37f2eba1b6ee2ed138e3367d80be55c9d7d","modified":1621854357915},{"_id":"themes/keep/source/css/layout/_partial/header.styl","hash":"2bfe1bddb6224958f29e77bcb730cb7af547a5ae","modified":1621854357915},{"_id":"themes/keep/source/css/layout/_partial/local-search.styl","hash":"a381afa2de855d968810c4f6680436fd31c63d55","modified":1621854357916},{"_id":"themes/keep/source/css/layout/_partial/image-viewer.styl","hash":"fb82ac6589304cf1e3ed7ff2904108641882ddbc","modified":1621854357916},{"_id":"themes/keep/source/css/layout/_partial/page-template.styl","hash":"97768d3f95e8cf36fd3f783a5deb7e8fcaa5c67d","modified":1621854357917},{"_id":"themes/keep/source/css/layout/_partial/paginator.styl","hash":"2fbe611351cdeee678626c22aa268132693936b2","modified":1621854357917},{"_id":"themes/keep/source/css/layout/_partial/post-tools.styl","hash":"7c642dfdd54ed60aadb2f162e25c4fc5720716b7","modified":1621854357918},{"_id":"themes/keep/source/css/layout/_partial/progress-bar.styl","hash":"c2b9474d130df3605578b77d76c604234a2b0f6f","modified":1621854357918},{"_id":"themes/keep/source/css/layout/_partial/side-tools.styl","hash":"f1cec5eb066c13f17d0acc997790404d059fbd3f","modified":1621854357919},{"_id":"themes/keep/source/css/layout/_partial/tagcloud.styl","hash":"39d03031033aa3bb9d3a76fdb5056966334e9221","modified":1621854357919},{"_id":"themes/keep/source/css/layout/_partial/toc.styl","hash":"c19d5833234c510ac1b8358cfcb7e33af29c3f6d","modified":1621854357920},{"_id":"themes/keep/source/css/layout/_partial/comment/comment.styl","hash":"9874482d9a8bf623abc28f8fa9c2bbfeb55067a6","modified":1621854357911},{"_id":"themes/keep/source/css/layout/_partial/comment/gitalk.styl","hash":"09d223d23c8f032da4f156efebab46102b15942d","modified":1621854357912},{"_id":"themes/keep/source/css/layout/_partial/comment/twikoo.styl","hash":"8225224a5c6d688e4ecd2e5557e8b2c5c43e2cf4","modified":1621854357912},{"_id":"themes/keep/source/css/layout/_partial/comment/valine.styl","hash":"dbff6bc6ecb6a20068047e6f7532e1d2df627929","modified":1621854357913},{"_id":"themes/keep/source/images/avatar.jpg","hash":"bc79839a881541d694cfacc5560f1579315ad49e","modified":1621894999221},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff","hash":"a42ac4a94f4e0e9333cdb1b2fb6c13c0ae690ff2","modified":1621854357952},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff2","hash":"f726c4275bb494a045fde059175f072de06c01df","modified":1621854357953},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff","hash":"3b86a0ce15d8d534b65e98560e321a933d310688","modified":1621854357981},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff2","hash":"9b592048b9062b00f0b2dd782d70a95b7dc69b83","modified":1621854357982},{"_id":"themes/keep/source/webfonts/fa-brands-400.eot","hash":"c719f4375679ee58e156434f9ba9727be669cf07","modified":1621854357939},{"_id":"themes/keep/source/webfonts/fa-brands-400.ttf","hash":"9b49c6c5b0cbdef158ae31b2a4e4814555408389","modified":1621854357951},{"_id":"themes/keep/source/webfonts/fa-regular-400.svg","hash":"6ad2be875a79cb6efb8d7ecf6e632784906656a7","modified":1621854357957},{"_id":"themes/keep/source/webfonts/fa-solid-900.eot","hash":"c39b89f7fa7b66931ab02a54002db5ffcbff206c","modified":1621854357964},{"_id":"themes/keep/source/webfonts/fa-solid-900.ttf","hash":"d537bf4cc7273ddb3fd754d53f2b241aeafaefe7","modified":1621854357979},{"_id":"themes/keep/source/webfonts/fa-brands-400.svg","hash":"deddeac293c90f492dc8546a468871a07b83e6b3","modified":1621854357948},{"_id":"themes/keep/source/webfonts/fa-solid-900.svg","hash":"b635afc5e400633904e0a7cde3ec75cd57e403cf","modified":1621854357975},{"_id":"public/search.json","hash":"a4ebe9d365938708501c692a8fe2b7915ee4cc21","modified":1624042270707},{"_id":"public/archives/index.html","hash":"7042113710143a4b80d5e8eaf255469c1be054d1","modified":1624042270707},{"_id":"public/archives/2021/index.html","hash":"e79b0f91244c3def390bb136467f4587c309cf21","modified":1624042270707},{"_id":"public/archives/2021/06/index.html","hash":"c3091381e9d0ff7f4171ab6706f622e936d82347","modified":1624042270707},{"_id":"public/index.html","hash":"ee8c098c09a30a97baad8cc13eb775448304c664","modified":1624042270707},{"_id":"public/2021/06/18/搭建订阅转换服务的一次记录/index.html","hash":"bc74ed0f9d91600d288e8fa6c807737d1ed1bc2d","modified":1624042270707},{"_id":"public/2021/06/17/配置Mosh的一次记录/index.html","hash":"edc8d3a8a1ba76c2cf4a2a8e105256e255607a98","modified":1624042270707},{"_id":"public/CNAME","hash":"5a946399b4911154f7027086d30418597ba32e0a","modified":1624042270707},{"_id":"public/images/bg.svg","hash":"fe49c289a1110973a1c089fe4a9565eb06ecc036","modified":1624042270707},{"_id":"public/images/favicon.ico","hash":"f8e6366200a6d100dbb81d59148f7dde704d1cdb","modified":1624042270707},{"_id":"public/images/loading.svg","hash":"7689011e66c78998d91784ae5abe680f76772589","modified":1624042270707},{"_id":"public/images/logo.svg","hash":"509c25b6e51d435b3acd6b0a85b823daf9a48363","modified":1624042270707},{"_id":"public/webfonts/fa-regular-400.eot","hash":"2baa9a8aa68f1d2d4712b3c7205f9105aaf21879","modified":1624042270707},{"_id":"public/webfonts/fa-regular-400.woff","hash":"26afc29d39ab9fac6d0b607be7e76db093ff7c3a","modified":1624042270707},{"_id":"public/webfonts/fa-regular-400.ttf","hash":"d64e58981a419de52bac110c979887d34e366135","modified":1624042270707},{"_id":"public/webfonts/fa-regular-400.woff2","hash":"fb9648469530a05fa9aac80e47d4d6960472a242","modified":1624042270707},{"_id":"public/images/avatar.jpg","hash":"bc79839a881541d694cfacc5560f1579315ad49e","modified":1624042270707},{"_id":"public/webfonts/fa-brands-400.woff","hash":"a42ac4a94f4e0e9333cdb1b2fb6c13c0ae690ff2","modified":1624042270707},{"_id":"public/webfonts/fa-brands-400.woff2","hash":"f726c4275bb494a045fde059175f072de06c01df","modified":1624042270707},{"_id":"public/webfonts/fa-solid-900.woff","hash":"3b86a0ce15d8d534b65e98560e321a933d310688","modified":1624042270707},{"_id":"public/webfonts/fa-solid-900.woff2","hash":"9b592048b9062b00f0b2dd782d70a95b7dc69b83","modified":1624042270707},{"_id":"public/webfonts/fa-brands-400.eot","hash":"c719f4375679ee58e156434f9ba9727be669cf07","modified":1624042270707},{"_id":"public/webfonts/fa-brands-400.ttf","hash":"9b49c6c5b0cbdef158ae31b2a4e4814555408389","modified":1624042270707},{"_id":"public/webfonts/fa-regular-400.svg","hash":"6ad2be875a79cb6efb8d7ecf6e632784906656a7","modified":1624042270707},{"_id":"public/js/back2top.js","hash":"fc8e85f6704e39ae3a613bbec5dd51d449be8010","modified":1624042270707},{"_id":"public/js/code-copy.js","hash":"3fdabac26f6406a4592336f1f444ec966201b5d9","modified":1624042270707},{"_id":"public/js/header-shrink.js","hash":"167b9b6a9ed63c6cf4081cb3c201dd16bbbfb9ad","modified":1624042270707},{"_id":"public/js/lazyload.js","hash":"95aad532f17d7a8119979fc61ade9e626308a2af","modified":1624042270707},{"_id":"public/js/dark-light-toggle.js","hash":"223e6f1d4e6e70956e4661b58c430e1c68def125","modified":1624042270707},{"_id":"public/js/left-side-toggle.js","hash":"618f7cfc45db4d82b2f1d00d8e9ee936bcf9043b","modified":1624042270707},{"_id":"public/js/local-search.js","hash":"9509ec6d2d7d4466fe37ad624cf606f6639fb3fe","modified":1624042270707},{"_id":"public/js/main.js","hash":"ca8ed228cc0bc234be74428d029cfd047eec0ed6","modified":1624042270707},{"_id":"public/js/toc.js","hash":"ae69bf65d2b30d299b6ca9e2361d3b6e0db3a077","modified":1624042270707},{"_id":"public/js/utils.js","hash":"47c6d222a116498359345777aea383c429975abf","modified":1624042270707},{"_id":"public/css/common/animated.css","hash":"654c7588d80dc8b481a203e3071b3cedd41c7fde","modified":1624042270707},{"_id":"public/css/common/basic.css","hash":"90463d324ee0315e8f8bc620e7592a54d9220648","modified":1624042270707},{"_id":"public/css/common/keep-theme.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1624042270707},{"_id":"public/css/common/markdown.css","hash":"8c9fb9f7fb403e76a4446a7e533ebe36dd702483","modified":1624042270707},{"_id":"public/css/common/variables.css","hash":"157311f7b38a76721f2b6a2a9bd5229fac60df41","modified":1624042270707},{"_id":"public/css/layout/archive-content.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1624042270707},{"_id":"public/css/layout/article-content.css","hash":"bb2e9b90086c4a014d0dbeb97cd0beedab27fe9c","modified":1624042270707},{"_id":"public/css/layout/category-content.css","hash":"9687f9cbe029092b633fb804c28ecdcb54860511","modified":1624042270707},{"_id":"public/css/layout/category-list.css","hash":"672859a61a4e93c0514772112fb557395306e940","modified":1624042270707},{"_id":"public/css/layout/home-content.css","hash":"be1438b849ebf82cea573986fbbd1deed5334a72","modified":1624042270707},{"_id":"public/css/layout/page.css","hash":"dc57eee2b360ad0e9910d69653d547f033dbbd4c","modified":1624042270707},{"_id":"public/css/layout/tag-content.css","hash":"90b0cff1ef0228035cdca9ade2adef71c6c8fb5e","modified":1624042270707},{"_id":"public/css/common/codeblock/code-theme.css","hash":"0edc6d498dc0abbaadb152b48e9e7bebb6fd15f4","modified":1624042270707},{"_id":"public/css/common/codeblock/copy-code.css","hash":"b89f31aee2da7a9abe05293391a90602094095b8","modified":1624042270707},{"_id":"public/css/common/codeblock/highlight.css","hash":"a6584196f859d00cdd962f43c809e44ed89319e4","modified":1624042270707},{"_id":"public/css/style.css","hash":"7175b2199fbfa1160df30df213d0d9f934f806ff","modified":1624042270707},{"_id":"public/webfonts/fa-solid-900.eot","hash":"c39b89f7fa7b66931ab02a54002db5ffcbff206c","modified":1624042270707},{"_id":"public/webfonts/fa-solid-900.ttf","hash":"d537bf4cc7273ddb3fd754d53f2b241aeafaefe7","modified":1624042270707},{"_id":"public/js/libs/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1624042270707},{"_id":"public/js/libs/pjax.min.js","hash":"57ec40cb4898d7ba74a03603d608af378e5431f8","modified":1624042270707},{"_id":"public/css/font-awesome.min.css","hash":"c508528feb9fd540454f838653cd4863b290df2e","modified":1624042270707},{"_id":"public/webfonts/fa-brands-400.svg","hash":"deddeac293c90f492dc8546a468871a07b83e6b3","modified":1624042270707},{"_id":"public/webfonts/fa-solid-900.svg","hash":"b635afc5e400633904e0a7cde3ec75cd57e403cf","modified":1624042270707}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"搭建订阅转换服务的一次记录","author":"lily blessing","date":"2021-06-18T15:57:00.000Z","_content":"# 订阅转换服务\n\n## 前言\n\n笔者用的几个机场分别采用了ssr和v2的订阅方案，而这几个客户端无论是win平台还是Android平台，切换起来都太麻烦了；刚好clash现在已经支持ssr了，就打算全部移至clash平台使用。  虽然机场主有提供订阅转换服务，但用公共服务还是多少有点不爽的，于是决定自建一个。\n\n## 准备工作\n- 一台用于安装服务的VPS\n- cloudflare托管好的域名\n\n### 所用到的项目\n- 前端项目[Sub-Web](https://github.com/CareyWang/sub-web)\n- 后端项目[Subconverter](https://github.com/tindy2013/subconverter)\n\n## 部署流程\n### 1. 在cloudflare做好域名解析\n(记得打开橙色的小云朵,也就是CDN)\n - 前端域名sub.xxxx.com\n - 后端域名suc.xxxx.com\n ---  \n### 2. 部署前端\n 1. 安装开发环境\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_12.x | bash -\nsudo yum install -y nodejs\nwget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo\nyum -y install yarn\n ```\n 确认版本\n``` bash\nnode -v\nyarn -v\n```\n 2.  拉取 sub-web\n ``` bash\n git clone https://github.com/CareyWang/sub-web.git && cd sub-web\n ```\n 3. 构建依赖项\n ``` bash\n yarn install\n ```\n 4. 本地开发试运行\n ``` bash\n yarn serve\n ```\n 防火墙打开8080端口,便可访问http://服务器ip:8080/ 预览确认\n ![sub-web-preview](https://oss.lilyblessing.xyz/2:/img/sub-web-pre.jpg)\n \n 5. 修改配置文件  \n 打开`/root/sub-web/src/views/Subconverter.vue`文件  \n 搜索`backendOptions:` 约在第258行 将`http://127.0.0.1:25500/sub?`替换为之前cf解析的域名`https://suc.xxxx.com/sub?`  \n 注意这里填写的是后端域名\n \n 6. 更换远程规则\n 打开`/root/sub-web/src/views/Subconverter.vue`,也就是刚刚那个文件  \n 搜索`remoteConfig: [`，回车一行，复制下方规则粘贴空行\n ``` bash\n          {\n            label: \"ACL4SSR\",\n            options: [\n              {\n                label: \"ACL4SSR_Online 默认版 分组比较全 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_AdblockPlus 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_NoAuto 无自动测速 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_NoReject 无广告拦截规则 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini 精简版 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full 全分组 重度用户使用 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini\"\n              },\n              {\n                label: \"ACL4SSR 本地 默认版 分组比较全\",\n                value: \"config/ACL4SSR.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini 本地 精简版\",\n                value: \"config/ACL4SSR_Mini.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速\",\n                value: \"config/ACL4SSR_Mini_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback\",\n                value: \"config/ACL4SSR_Mini_Fallback.ini\"\n              },\n              {\n                label: \"ACL4SSR_BackCN 本地 回国\",\n                value: \"config/ACL4SSR_BackCN.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoApple 本地 无苹果分流\",\n                value: \"config/ACL4SSR_NoApple.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoAuto 本地 无自动测速 \",\n                value: \"config/ACL4SSR_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoAuto_NoApple 本地 无自动测速&无苹果分流\",\n                value: \"config/ACL4SSR_NoAuto_NoApple.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoMicrosoft 本地 无微软分流\",\n                value: \"config/ACL4SSR_NoMicrosoft.ini\"\n              },\n              {\n                label: \"ACL4SSR_WithGFW 本地 GFW列表\",\n                value: \"config/ACL4SSR_WithGFW.ini\"\n              }\n            ]\n          },\n ```\n 7. 打包发布  \n 先停止试运行站点`Ctrl+C` 然后开始打包程序（会消耗一会时间，建议开screen运行）\n ``` bash\n cd sub-web\n yarn build\n ```\n 执行完毕后，会在 `/root/sub-web` 下面会生成一个 `dist` 目录，这个目录即为网页的发布目录。\n \n 8. 放入网站目录配置SSL等  \n （由于静态网页运行所以测试开的端口8080可以关闭了）\n ---\n### 3. 部署后端\n1. 拉取后端程序\n``` bash\ncd /root/\nwget https://github.com/tindy2013/subconverter/releases/download/v0.6.3/subconverter_linux64.tar.gz\ntar -zxvf subconverter_linux64.tar.gz\ncd subconverter/\n```\n2. 修改配置文件  \n打开`/root/subconverter/pref.ini`文件 搜索配置项并修改\n``` bash\napi_access_token=123456789abcdefg     \t       #随意设置自己知道就行\nmanaged_config_prefix=https://suc.*******.com    #设置成我们刚刚解析的后端域名\nlisten=127.0.0.1                  \t\t       #这里改成 127.0.0.1 进行反代\nport=25500 \t\t\t\t\t\t\t\t\t  #这里是后端要使用的端口号，随意更改，记得防火墙放行\n```\n3. 设置服务启动项\n打开`/etc/systemd/system`目录 创建`sub.service`文件 写入\n``` bash\n[Unit]\nDescription=Subscription Convert API\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/root/subconverter/subconverter\nWorkingDirectory=/root/subconverter\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n```\n检查运行状态以及设置开机自启\n``` bash\nsystemctl daemon-reload\nsystemctl start sub\nsystemctl enable sub\nsystemctl status sub\n```\n然后为后端域名设置反代localhost:25500(默认端口没改变的话)\n状态无误可访问域名 `https://suc.*****.com/`测试\n![suc-preview](https://oss.lilyblessing.xyz/2:/img/suc-preview.jpg)\n\n---\n至此搭建完毕\n\n \n ","source":"_posts/搭建订阅转换服务的一次记录.md","raw":"title: 搭建订阅转换服务的一次记录\nauthor: lily blessing\ntags: []\ncategories: []\ndate: 2021-06-18 23:57:00\n---\n# 订阅转换服务\n\n## 前言\n\n笔者用的几个机场分别采用了ssr和v2的订阅方案，而这几个客户端无论是win平台还是Android平台，切换起来都太麻烦了；刚好clash现在已经支持ssr了，就打算全部移至clash平台使用。  虽然机场主有提供订阅转换服务，但用公共服务还是多少有点不爽的，于是决定自建一个。\n\n## 准备工作\n- 一台用于安装服务的VPS\n- cloudflare托管好的域名\n\n### 所用到的项目\n- 前端项目[Sub-Web](https://github.com/CareyWang/sub-web)\n- 后端项目[Subconverter](https://github.com/tindy2013/subconverter)\n\n## 部署流程\n### 1. 在cloudflare做好域名解析\n(记得打开橙色的小云朵,也就是CDN)\n - 前端域名sub.xxxx.com\n - 后端域名suc.xxxx.com\n ---  \n### 2. 部署前端\n 1. 安装开发环境\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_12.x | bash -\nsudo yum install -y nodejs\nwget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo\nyum -y install yarn\n ```\n 确认版本\n``` bash\nnode -v\nyarn -v\n```\n 2.  拉取 sub-web\n ``` bash\n git clone https://github.com/CareyWang/sub-web.git && cd sub-web\n ```\n 3. 构建依赖项\n ``` bash\n yarn install\n ```\n 4. 本地开发试运行\n ``` bash\n yarn serve\n ```\n 防火墙打开8080端口,便可访问http://服务器ip:8080/ 预览确认\n ![sub-web-preview](https://oss.lilyblessing.xyz/2:/img/sub-web-pre.jpg)\n \n 5. 修改配置文件  \n 打开`/root/sub-web/src/views/Subconverter.vue`文件  \n 搜索`backendOptions:` 约在第258行 将`http://127.0.0.1:25500/sub?`替换为之前cf解析的域名`https://suc.xxxx.com/sub?`  \n 注意这里填写的是后端域名\n \n 6. 更换远程规则\n 打开`/root/sub-web/src/views/Subconverter.vue`,也就是刚刚那个文件  \n 搜索`remoteConfig: [`，回车一行，复制下方规则粘贴空行\n ``` bash\n          {\n            label: \"ACL4SSR\",\n            options: [\n              {\n                label: \"ACL4SSR_Online 默认版 分组比较全 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_AdblockPlus 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_NoAuto 无自动测速 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_NoReject 无广告拦截规则 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini 精简版 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full 全分组 重度用户使用 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini\"\n              },\n              {\n                label: \"ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量 (与Github同步)\",\n                value:\n                  \"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini\"\n              },\n              {\n                label: \"ACL4SSR 本地 默认版 分组比较全\",\n                value: \"config/ACL4SSR.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini 本地 精简版\",\n                value: \"config/ACL4SSR_Mini.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速\",\n                value: \"config/ACL4SSR_Mini_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback\",\n                value: \"config/ACL4SSR_Mini_Fallback.ini\"\n              },\n              {\n                label: \"ACL4SSR_BackCN 本地 回国\",\n                value: \"config/ACL4SSR_BackCN.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoApple 本地 无苹果分流\",\n                value: \"config/ACL4SSR_NoApple.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoAuto 本地 无自动测速 \",\n                value: \"config/ACL4SSR_NoAuto.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoAuto_NoApple 本地 无自动测速&无苹果分流\",\n                value: \"config/ACL4SSR_NoAuto_NoApple.ini\"\n              },\n              {\n                label: \"ACL4SSR_NoMicrosoft 本地 无微软分流\",\n                value: \"config/ACL4SSR_NoMicrosoft.ini\"\n              },\n              {\n                label: \"ACL4SSR_WithGFW 本地 GFW列表\",\n                value: \"config/ACL4SSR_WithGFW.ini\"\n              }\n            ]\n          },\n ```\n 7. 打包发布  \n 先停止试运行站点`Ctrl+C` 然后开始打包程序（会消耗一会时间，建议开screen运行）\n ``` bash\n cd sub-web\n yarn build\n ```\n 执行完毕后，会在 `/root/sub-web` 下面会生成一个 `dist` 目录，这个目录即为网页的发布目录。\n \n 8. 放入网站目录配置SSL等  \n （由于静态网页运行所以测试开的端口8080可以关闭了）\n ---\n### 3. 部署后端\n1. 拉取后端程序\n``` bash\ncd /root/\nwget https://github.com/tindy2013/subconverter/releases/download/v0.6.3/subconverter_linux64.tar.gz\ntar -zxvf subconverter_linux64.tar.gz\ncd subconverter/\n```\n2. 修改配置文件  \n打开`/root/subconverter/pref.ini`文件 搜索配置项并修改\n``` bash\napi_access_token=123456789abcdefg     \t       #随意设置自己知道就行\nmanaged_config_prefix=https://suc.*******.com    #设置成我们刚刚解析的后端域名\nlisten=127.0.0.1                  \t\t       #这里改成 127.0.0.1 进行反代\nport=25500 \t\t\t\t\t\t\t\t\t  #这里是后端要使用的端口号，随意更改，记得防火墙放行\n```\n3. 设置服务启动项\n打开`/etc/systemd/system`目录 创建`sub.service`文件 写入\n``` bash\n[Unit]\nDescription=Subscription Convert API\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/root/subconverter/subconverter\nWorkingDirectory=/root/subconverter\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n```\n检查运行状态以及设置开机自启\n``` bash\nsystemctl daemon-reload\nsystemctl start sub\nsystemctl enable sub\nsystemctl status sub\n```\n然后为后端域名设置反代localhost:25500(默认端口没改变的话)\n状态无误可访问域名 `https://suc.*****.com/`测试\n![suc-preview](https://oss.lilyblessing.xyz/2:/img/suc-preview.jpg)\n\n---\n至此搭建完毕\n\n \n ","slug":"搭建订阅转换服务的一次记录","published":1,"updated":"2021-06-18T18:49:21.567Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckq2ou5wt0000pk1d15u3f89y","content":"<h1 id=\"订阅转换服务\"><a href=\"#订阅转换服务\" class=\"headerlink\" title=\"订阅转换服务\"></a>订阅转换服务</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>笔者用的几个机场分别采用了ssr和v2的订阅方案，而这几个客户端无论是win平台还是Android平台，切换起来都太麻烦了；刚好clash现在已经支持ssr了，就打算全部移至clash平台使用。  虽然机场主有提供订阅转换服务，但用公共服务还是多少有点不爽的，于是决定自建一个。</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><ul>\n<li>一台用于安装服务的VPS</li>\n<li>cloudflare托管好的域名</li>\n</ul>\n<h3 id=\"所用到的项目\"><a href=\"#所用到的项目\" class=\"headerlink\" title=\"所用到的项目\"></a>所用到的项目</h3><ul>\n<li>前端项目<a class=\"link\"   href=\"https://github.com/CareyWang/sub-web\" >Sub-Web<i class=\"fas fa-external-link-alt\"></i></a></li>\n<li>后端项目<a class=\"link\"   href=\"https://github.com/tindy2013/subconverter\" >Subconverter<i class=\"fas fa-external-link-alt\"></i></a></li>\n</ul>\n<h2 id=\"部署流程\"><a href=\"#部署流程\" class=\"headerlink\" title=\"部署流程\"></a>部署流程</h2><h3 id=\"1-在cloudflare做好域名解析\"><a href=\"#1-在cloudflare做好域名解析\" class=\"headerlink\" title=\"1. 在cloudflare做好域名解析\"></a>1. 在cloudflare做好域名解析</h3><p>(记得打开橙色的小云朵,也就是CDN)</p>\n<ul>\n<li>前端域名sub.xxxx.com</li>\n<li>后端域名suc.xxxx.com</li>\n</ul>\n<hr>\n<h3 id=\"2-部署前端\"><a href=\"#2-部署前端\" class=\"headerlink\" title=\"2. 部署前端\"></a>2. 部署前端</h3><ol>\n<li>安装开发环境<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_12.x | bash -</span><br><span class=\"line\">sudo yum install -y nodejs</span><br><span class=\"line\">wget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo</span><br><span class=\"line\">yum -y install yarn</span><br></pre></td></tr></table></figure>\n确认版本<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">yarn -v</span><br></pre></td></tr></table></figure></li>\n<li>拉取 sub-web<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/CareyWang/sub-web.git &amp;&amp; <span class=\"built_in\">cd</span> sub-web</span><br></pre></td></tr></table></figure></li>\n<li>构建依赖项<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn install</span><br></pre></td></tr></table></figure></li>\n<li>本地开发试运行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn serve</span><br></pre></td></tr></table></figure>\n防火墙打开8080端口,便可访问http://服务器ip:8080/ 预览确认<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://oss.lilyblessing.xyz/2:/img/sub-web-pre.jpg\"\n                      alt=\"sub-web-preview\"\n                ></li>\n<li>修改配置文件<br>打开<code>/root/sub-web/src/views/Subconverter.vue</code>文件<br>搜索<code>backendOptions:</code> 约在第258行 将<code>http://127.0.0.1:25500/sub?</code>替换为之前cf解析的域名<code>https://suc.xxxx.com/sub?</code><br>注意这里填写的是后端域名</li>\n<li>更换远程规则<br>打开<code>/root/sub-web/src/views/Subconverter.vue</code>,也就是刚刚那个文件<br>搜索<code>remoteConfig: [</code>，回车一行，复制下方规则粘贴空行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  label: <span class=\"string\">&quot;ACL4SSR&quot;</span>,</span><br><span class=\"line\">  options: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online 默认版 分组比较全 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_AdblockPlus 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_NoAuto 无自动测速 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_NoReject 无广告拦截规则 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini 精简版 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full 全分组 重度用户使用 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR 本地 默认版 分组比较全&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini 本地 精简版&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini_Fallback.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_BackCN 本地 回国&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_BackCN.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoApple 本地 无苹果分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoApple.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoAuto 本地 无自动测速 &quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoAuto_NoApple 本地 无自动测速&amp;无苹果分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoAuto_NoApple.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoMicrosoft 本地 无微软分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoMicrosoft.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_WithGFW 本地 GFW列表&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_WithGFW.ini&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>打包发布<br>先停止试运行站点<code>Ctrl+C</code> 然后开始打包程序（会消耗一会时间，建议开screen运行）<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> sub-web</span><br><span class=\"line\">yarn build</span><br></pre></td></tr></table></figure>\n执行完毕后，会在 <code>/root/sub-web</code> 下面会生成一个 <code>dist</code> 目录，这个目录即为网页的发布目录。</li>\n<li>放入网站目录配置SSL等<br>（由于静态网页运行所以测试开的端口8080可以关闭了）</li>\n</ol>\n<hr>\n<h3 id=\"3-部署后端\"><a href=\"#3-部署后端\" class=\"headerlink\" title=\"3. 部署后端\"></a>3. 部署后端</h3><ol>\n<li>拉取后端程序<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /root/</span><br><span class=\"line\">wget https://github.com/tindy2013/subconverter/releases/download/v0.6.3/subconverter_linux64.tar.gz</span><br><span class=\"line\">tar -zxvf subconverter_linux64.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> subconverter/</span><br></pre></td></tr></table></figure></li>\n<li>修改配置文件<br>打开<code>/root/subconverter/pref.ini</code>文件 搜索配置项并修改<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">api_access_token=123456789abcdefg     \t       <span class=\"comment\">#随意设置自己知道就行</span></span><br><span class=\"line\">managed_config_prefix=https://suc.*******.com    <span class=\"comment\">#设置成我们刚刚解析的后端域名</span></span><br><span class=\"line\">listen=127.0.0.1                  \t\t       <span class=\"comment\">#这里改成 127.0.0.1 进行反代</span></span><br><span class=\"line\">port=25500 \t\t\t\t\t\t\t\t\t  <span class=\"comment\">#这里是后端要使用的端口号，随意更改，记得防火墙放行</span></span><br></pre></td></tr></table></figure></li>\n<li>设置服务启动项<br>打开<code>/etc/systemd/system</code>目录 创建<code>sub.service</code>文件 写入<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Subscription Convert API</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">ExecStart=/root/subconverter/subconverter</span><br><span class=\"line\">WorkingDirectory=/root/subconverter</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">RestartSec=10</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n检查运行状态以及设置开机自启<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start sub</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> sub</span><br><span class=\"line\">systemctl status sub</span><br></pre></td></tr></table></figure>\n然后为后端域名设置反代localhost:25500(默认端口没改变的话)<br>状态无误可访问域名 <code>https://suc.*****.com/</code>测试<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://oss.lilyblessing.xyz/2:/img/suc-preview.jpg\"\n                      alt=\"suc-preview\"\n                ></li>\n</ol>\n<hr>\n<p>至此搭建完毕</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"订阅转换服务\"><a href=\"#订阅转换服务\" class=\"headerlink\" title=\"订阅转换服务\"></a>订阅转换服务</h1><h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>笔者用的几个机场分别采用了ssr和v2的订阅方案，而这几个客户端无论是win平台还是Android平台，切换起来都太麻烦了；刚好clash现在已经支持ssr了，就打算全部移至clash平台使用。  虽然机场主有提供订阅转换服务，但用公共服务还是多少有点不爽的，于是决定自建一个。</p>\n<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><ul>\n<li>一台用于安装服务的VPS</li>\n<li>cloudflare托管好的域名</li>\n</ul>\n<h3 id=\"所用到的项目\"><a href=\"#所用到的项目\" class=\"headerlink\" title=\"所用到的项目\"></a>所用到的项目</h3><ul>\n<li>前端项目<a class=\"link\"   href=\"https://github.com/CareyWang/sub-web\" >Sub-Web<i class=\"fas fa-external-link-alt\"></i></a></li>\n<li>后端项目<a class=\"link\"   href=\"https://github.com/tindy2013/subconverter\" >Subconverter<i class=\"fas fa-external-link-alt\"></i></a></li>\n</ul>\n<h2 id=\"部署流程\"><a href=\"#部署流程\" class=\"headerlink\" title=\"部署流程\"></a>部署流程</h2><h3 id=\"1-在cloudflare做好域名解析\"><a href=\"#1-在cloudflare做好域名解析\" class=\"headerlink\" title=\"1. 在cloudflare做好域名解析\"></a>1. 在cloudflare做好域名解析</h3><p>(记得打开橙色的小云朵,也就是CDN)</p>\n<ul>\n<li>前端域名sub.xxxx.com</li>\n<li>后端域名suc.xxxx.com</li>\n</ul>\n<hr>\n<h3 id=\"2-部署前端\"><a href=\"#2-部署前端\" class=\"headerlink\" title=\"2. 部署前端\"></a>2. 部署前端</h3><ol>\n<li>安装开发环境<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_12.x | bash -</span><br><span class=\"line\">sudo yum install -y nodejs</span><br><span class=\"line\">wget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo</span><br><span class=\"line\">yum -y install yarn</span><br></pre></td></tr></table></figure>\n确认版本<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">yarn -v</span><br></pre></td></tr></table></figure></li>\n<li>拉取 sub-web<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/CareyWang/sub-web.git &amp;&amp; <span class=\"built_in\">cd</span> sub-web</span><br></pre></td></tr></table></figure></li>\n<li>构建依赖项<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn install</span><br></pre></td></tr></table></figure></li>\n<li>本地开发试运行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn serve</span><br></pre></td></tr></table></figure>\n防火墙打开8080端口,便可访问http://服务器ip:8080/ 预览确认<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://oss.lilyblessing.xyz/2:/img/sub-web-pre.jpg\"\n                      alt=\"sub-web-preview\"\n                ></li>\n<li>修改配置文件<br>打开<code>/root/sub-web/src/views/Subconverter.vue</code>文件<br>搜索<code>backendOptions:</code> 约在第258行 将<code>http://127.0.0.1:25500/sub?</code>替换为之前cf解析的域名<code>https://suc.xxxx.com/sub?</code><br>注意这里填写的是后端域名</li>\n<li>更换远程规则<br>打开<code>/root/sub-web/src/views/Subconverter.vue</code>,也就是刚刚那个文件<br>搜索<code>remoteConfig: [</code>，回车一行，复制下方规则粘贴空行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  label: <span class=\"string\">&quot;ACL4SSR&quot;</span>,</span><br><span class=\"line\">  options: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online 默认版 分组比较全 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_AdblockPlus 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_NoAuto 无自动测速 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_NoReject 无广告拦截规则 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini 精简版 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full 全分组 重度用户使用 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量 (与Github同步)&quot;</span>,</span><br><span class=\"line\">      value:</span><br><span class=\"line\">        <span class=\"string\">&quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR 本地 默认版 分组比较全&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini 本地 精简版&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_Mini_Fallback.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_BackCN 本地 回国&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_BackCN.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoApple 本地 无苹果分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoApple.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoAuto 本地 无自动测速 &quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoAuto.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoAuto_NoApple 本地 无自动测速&amp;无苹果分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoAuto_NoApple.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_NoMicrosoft 本地 无微软分流&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_NoMicrosoft.ini&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      label: <span class=\"string\">&quot;ACL4SSR_WithGFW 本地 GFW列表&quot;</span>,</span><br><span class=\"line\">      value: <span class=\"string\">&quot;config/ACL4SSR_WithGFW.ini&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></li>\n<li>打包发布<br>先停止试运行站点<code>Ctrl+C</code> 然后开始打包程序（会消耗一会时间，建议开screen运行）<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> sub-web</span><br><span class=\"line\">yarn build</span><br></pre></td></tr></table></figure>\n执行完毕后，会在 <code>/root/sub-web</code> 下面会生成一个 <code>dist</code> 目录，这个目录即为网页的发布目录。</li>\n<li>放入网站目录配置SSL等<br>（由于静态网页运行所以测试开的端口8080可以关闭了）</li>\n</ol>\n<hr>\n<h3 id=\"3-部署后端\"><a href=\"#3-部署后端\" class=\"headerlink\" title=\"3. 部署后端\"></a>3. 部署后端</h3><ol>\n<li>拉取后端程序<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /root/</span><br><span class=\"line\">wget https://github.com/tindy2013/subconverter/releases/download/v0.6.3/subconverter_linux64.tar.gz</span><br><span class=\"line\">tar -zxvf subconverter_linux64.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> subconverter/</span><br></pre></td></tr></table></figure></li>\n<li>修改配置文件<br>打开<code>/root/subconverter/pref.ini</code>文件 搜索配置项并修改<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">api_access_token=123456789abcdefg     \t       <span class=\"comment\">#随意设置自己知道就行</span></span><br><span class=\"line\">managed_config_prefix=https://suc.*******.com    <span class=\"comment\">#设置成我们刚刚解析的后端域名</span></span><br><span class=\"line\">listen=127.0.0.1                  \t\t       <span class=\"comment\">#这里改成 127.0.0.1 进行反代</span></span><br><span class=\"line\">port=25500 \t\t\t\t\t\t\t\t\t  <span class=\"comment\">#这里是后端要使用的端口号，随意更改，记得防火墙放行</span></span><br></pre></td></tr></table></figure></li>\n<li>设置服务启动项<br>打开<code>/etc/systemd/system</code>目录 创建<code>sub.service</code>文件 写入<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Subscription Convert API</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">ExecStart=/root/subconverter/subconverter</span><br><span class=\"line\">WorkingDirectory=/root/subconverter</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">RestartSec=10</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n检查运行状态以及设置开机自启<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start sub</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> sub</span><br><span class=\"line\">systemctl status sub</span><br></pre></td></tr></table></figure>\n然后为后端域名设置反代localhost:25500(默认端口没改变的话)<br>状态无误可访问域名 <code>https://suc.*****.com/</code>测试<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://oss.lilyblessing.xyz/2:/img/suc-preview.jpg\"\n                      alt=\"suc-preview\"\n                ></li>\n</ol>\n<hr>\n<p>至此搭建完毕</p>\n"},{"title":"配置Mosh的一次记录","author":"lily blessing","date":"2021-06-17T09:48:00.000Z","_content":"## 使用mosh来优化ssh连接\n\n笔者日常使用的是广电网，极其不稳定的网络连接导致一个网络波动就能掉线。\n由于SSH采用不可持续的连接，当网络出现波动时，SSH断开会导致当前正在运行的服务中断，对工作产生非常大的影响。\n无意间知道了Mosh这个东西，安装使用下，发现网络波动这种事情不会导致服务器连接断开了，特意查了下，原来Mosh使用的是UDP方式传输：虽然也支持使用SSH配置进行认证登录，但是数据传输本身是使用UDP方式的，Mosh支持在会话中断时，不会立即退出，而是启用一个计时器，当网络恢复后会自动连接，同时会延续之前的会话，不会重新开启一个。实在是帮大忙了。\n\n### 安装mosh\n\n#### 1. 在服务器端安装\n\n安装以笔者使用的CentOS7系统为例\n``` bash\n$ yum install -y epel-release\n$ yum install -y mosh \n```\n\nmosh使用的默认端口号UDP的60000-61000，很明显这个范围太大了，不合适也不安全。\n我们只放行60000-60010区间的udp端口即可。\n\n- 如果是iptables\n``` bash\n$ iptables -I INPUT 1 -p udp --dport 60000:60010 -j ACCEPT\n```\n- 如果是firewall\n``` bash \n$ firewall-cmd --permanent --zone=public --add-port=60000-60010/udp\n```\n\n#### 2. 在客户端使用\n\n- 如果默认端口号22没有改变，则只需要将原ssh改为mosh，mosh会自动接管ssh的配置(因此原ssh所用的端口号不能关闭)\n\n``` bash\n$ mosh root@192.168.**.**\n```\n\n- 如果ssh默认端口号改变了，就需要指定端口号，这里ssh端口号为123\n\n``` bash\n$ mosh --ssh=\"ssh -p 123\" root@192.168.**.**\n```\n\n- 只开启了一个或者几个mosh端口，需要指定端口号mosh端口号\n\n``` bash\n$ mosh -p 60010 --ssh=\"ssh -p 123\" root@192.168.**.**\n```\n\n- 不用密码使用秘钥登录 需要将服务器与本机的密钥的目录写好\n\n``` bash \nmosh -p 60010 --ssh=\"/usr/bin/ssh -i /home/ivo/.ssh/id_rsa\" root@192.168.**.**\n```\n\n#### 这里推荐一个终端 [FluentTerminal](https://github.com/felixse/FluentTerminal)\n\n这个终端采用fluent设计，界面很美观，而且原生支持mosh连接，感兴趣的朋友可以自行安装体验\n![FluentTerminal](https://github.com/felixse/FluentTerminal/raw/master/Screenshots/terminal.png)\n![FluentSettings](https://github.com/felixse/FluentTerminal/raw/master/Screenshots/settings.png)","source":"_posts/配置Mosh的一次记录.md","raw":"title: 配置Mosh的一次记录\nauthor: lily blessing\ntags: []\ncategories: []\ndate: 2021-06-17 17:48:00\n---\n## 使用mosh来优化ssh连接\n\n笔者日常使用的是广电网，极其不稳定的网络连接导致一个网络波动就能掉线。\n由于SSH采用不可持续的连接，当网络出现波动时，SSH断开会导致当前正在运行的服务中断，对工作产生非常大的影响。\n无意间知道了Mosh这个东西，安装使用下，发现网络波动这种事情不会导致服务器连接断开了，特意查了下，原来Mosh使用的是UDP方式传输：虽然也支持使用SSH配置进行认证登录，但是数据传输本身是使用UDP方式的，Mosh支持在会话中断时，不会立即退出，而是启用一个计时器，当网络恢复后会自动连接，同时会延续之前的会话，不会重新开启一个。实在是帮大忙了。\n\n### 安装mosh\n\n#### 1. 在服务器端安装\n\n安装以笔者使用的CentOS7系统为例\n``` bash\n$ yum install -y epel-release\n$ yum install -y mosh \n```\n\nmosh使用的默认端口号UDP的60000-61000，很明显这个范围太大了，不合适也不安全。\n我们只放行60000-60010区间的udp端口即可。\n\n- 如果是iptables\n``` bash\n$ iptables -I INPUT 1 -p udp --dport 60000:60010 -j ACCEPT\n```\n- 如果是firewall\n``` bash \n$ firewall-cmd --permanent --zone=public --add-port=60000-60010/udp\n```\n\n#### 2. 在客户端使用\n\n- 如果默认端口号22没有改变，则只需要将原ssh改为mosh，mosh会自动接管ssh的配置(因此原ssh所用的端口号不能关闭)\n\n``` bash\n$ mosh root@192.168.**.**\n```\n\n- 如果ssh默认端口号改变了，就需要指定端口号，这里ssh端口号为123\n\n``` bash\n$ mosh --ssh=\"ssh -p 123\" root@192.168.**.**\n```\n\n- 只开启了一个或者几个mosh端口，需要指定端口号mosh端口号\n\n``` bash\n$ mosh -p 60010 --ssh=\"ssh -p 123\" root@192.168.**.**\n```\n\n- 不用密码使用秘钥登录 需要将服务器与本机的密钥的目录写好\n\n``` bash \nmosh -p 60010 --ssh=\"/usr/bin/ssh -i /home/ivo/.ssh/id_rsa\" root@192.168.**.**\n```\n\n#### 这里推荐一个终端 [FluentTerminal](https://github.com/felixse/FluentTerminal)\n\n这个终端采用fluent设计，界面很美观，而且原生支持mosh连接，感兴趣的朋友可以自行安装体验\n![FluentTerminal](https://github.com/felixse/FluentTerminal/raw/master/Screenshots/terminal.png)\n![FluentSettings](https://github.com/felixse/FluentTerminal/raw/master/Screenshots/settings.png)","slug":"配置Mosh的一次记录","published":1,"updated":"2021-06-17T11:02:32.859Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckq2ou5x40001pk1d98a562u6","content":"<h2 id=\"使用mosh来优化ssh连接\"><a href=\"#使用mosh来优化ssh连接\" class=\"headerlink\" title=\"使用mosh来优化ssh连接\"></a>使用mosh来优化ssh连接</h2><p>笔者日常使用的是广电网，极其不稳定的网络连接导致一个网络波动就能掉线。<br>由于SSH采用不可持续的连接，当网络出现波动时，SSH断开会导致当前正在运行的服务中断，对工作产生非常大的影响。<br>无意间知道了Mosh这个东西，安装使用下，发现网络波动这种事情不会导致服务器连接断开了，特意查了下，原来Mosh使用的是UDP方式传输：虽然也支持使用SSH配置进行认证登录，但是数据传输本身是使用UDP方式的，Mosh支持在会话中断时，不会立即退出，而是启用一个计时器，当网络恢复后会自动连接，同时会延续之前的会话，不会重新开启一个。实在是帮大忙了。</p>\n<h3 id=\"安装mosh\"><a href=\"#安装mosh\" class=\"headerlink\" title=\"安装mosh\"></a>安装mosh</h3><h4 id=\"1-在服务器端安装\"><a href=\"#1-在服务器端安装\" class=\"headerlink\" title=\"1. 在服务器端安装\"></a>1. 在服务器端安装</h4><p>安装以笔者使用的CentOS7系统为例</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ yum install -y epel-release</span><br><span class=\"line\">$ yum install -y mosh </span><br></pre></td></tr></table></figure>\n\n<p>mosh使用的默认端口号UDP的60000-61000，很明显这个范围太大了，不合适也不安全。<br>我们只放行60000-60010区间的udp端口即可。</p>\n<ul>\n<li>如果是iptables<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ iptables -I INPUT 1 -p udp --dport 60000:60010 -j ACCEPT</span><br></pre></td></tr></table></figure></li>\n<li>如果是firewall<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ firewall-cmd --permanent --zone=public --add-port=60000-60010/udp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"2-在客户端使用\"><a href=\"#2-在客户端使用\" class=\"headerlink\" title=\"2. 在客户端使用\"></a>2. 在客户端使用</h4><ul>\n<li>如果默认端口号22没有改变，则只需要将原ssh改为mosh，mosh会自动接管ssh的配置(因此原ssh所用的端口号不能关闭)</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果ssh默认端口号改变了，就需要指定端口号，这里ssh端口号为123</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh --ssh=<span class=\"string\">&quot;ssh -p 123&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>只开启了一个或者几个mosh端口，需要指定端口号mosh端口号</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh -p 60010 --ssh=<span class=\"string\">&quot;ssh -p 123&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>不用密码使用秘钥登录 需要将服务器与本机的密钥的目录写好</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mosh -p 60010 --ssh=<span class=\"string\">&quot;/usr/bin/ssh -i /home/ivo/.ssh/id_rsa&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"这里推荐一个终端-FluentTerminal\"><a href=\"#这里推荐一个终端-FluentTerminal\" class=\"headerlink\" title=\"这里推荐一个终端 FluentTerminal\"></a>这里推荐一个终端 <a class=\"link\"   href=\"https://github.com/felixse/FluentTerminal\" >FluentTerminal<i class=\"fas fa-external-link-alt\"></i></a></h4><p>这个终端采用fluent设计，界面很美观，而且原生支持mosh连接，感兴趣的朋友可以自行安装体验<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://github.com/felixse/FluentTerminal/raw/master/Screenshots/terminal.png\"\n                      alt=\"FluentTerminal\"\n                ><br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://github.com/felixse/FluentTerminal/raw/master/Screenshots/settings.png\"\n                      alt=\"FluentSettings\"\n                ></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"使用mosh来优化ssh连接\"><a href=\"#使用mosh来优化ssh连接\" class=\"headerlink\" title=\"使用mosh来优化ssh连接\"></a>使用mosh来优化ssh连接</h2><p>笔者日常使用的是广电网，极其不稳定的网络连接导致一个网络波动就能掉线。<br>由于SSH采用不可持续的连接，当网络出现波动时，SSH断开会导致当前正在运行的服务中断，对工作产生非常大的影响。<br>无意间知道了Mosh这个东西，安装使用下，发现网络波动这种事情不会导致服务器连接断开了，特意查了下，原来Mosh使用的是UDP方式传输：虽然也支持使用SSH配置进行认证登录，但是数据传输本身是使用UDP方式的，Mosh支持在会话中断时，不会立即退出，而是启用一个计时器，当网络恢复后会自动连接，同时会延续之前的会话，不会重新开启一个。实在是帮大忙了。</p>\n<h3 id=\"安装mosh\"><a href=\"#安装mosh\" class=\"headerlink\" title=\"安装mosh\"></a>安装mosh</h3><h4 id=\"1-在服务器端安装\"><a href=\"#1-在服务器端安装\" class=\"headerlink\" title=\"1. 在服务器端安装\"></a>1. 在服务器端安装</h4><p>安装以笔者使用的CentOS7系统为例</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ yum install -y epel-release</span><br><span class=\"line\">$ yum install -y mosh </span><br></pre></td></tr></table></figure>\n\n<p>mosh使用的默认端口号UDP的60000-61000，很明显这个范围太大了，不合适也不安全。<br>我们只放行60000-60010区间的udp端口即可。</p>\n<ul>\n<li>如果是iptables<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ iptables -I INPUT 1 -p udp --dport 60000:60010 -j ACCEPT</span><br></pre></td></tr></table></figure></li>\n<li>如果是firewall<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ firewall-cmd --permanent --zone=public --add-port=60000-60010/udp</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"2-在客户端使用\"><a href=\"#2-在客户端使用\" class=\"headerlink\" title=\"2. 在客户端使用\"></a>2. 在客户端使用</h4><ul>\n<li>如果默认端口号22没有改变，则只需要将原ssh改为mosh，mosh会自动接管ssh的配置(因此原ssh所用的端口号不能关闭)</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>如果ssh默认端口号改变了，就需要指定端口号，这里ssh端口号为123</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh --ssh=<span class=\"string\">&quot;ssh -p 123&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>只开启了一个或者几个mosh端口，需要指定端口号mosh端口号</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mosh -p 60010 --ssh=<span class=\"string\">&quot;ssh -p 123&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>不用密码使用秘钥登录 需要将服务器与本机的密钥的目录写好</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mosh -p 60010 --ssh=<span class=\"string\">&quot;/usr/bin/ssh -i /home/ivo/.ssh/id_rsa&quot;</span> root@192.168.**.**</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"这里推荐一个终端-FluentTerminal\"><a href=\"#这里推荐一个终端-FluentTerminal\" class=\"headerlink\" title=\"这里推荐一个终端 FluentTerminal\"></a>这里推荐一个终端 <a class=\"link\"   href=\"https://github.com/felixse/FluentTerminal\" >FluentTerminal<i class=\"fas fa-external-link-alt\"></i></a></h4><p>这个终端采用fluent设计，界面很美观，而且原生支持mosh连接，感兴趣的朋友可以自行安装体验<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://github.com/felixse/FluentTerminal/raw/master/Screenshots/terminal.png\"\n                      alt=\"FluentTerminal\"\n                ><br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://github.com/felixse/FluentTerminal/raw/master/Screenshots/settings.png\"\n                      alt=\"FluentSettings\"\n                ></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}