[{"title":"Clash自定义规则配置的一次记录","url":"/lilyblessing.github.io/2021/06/19/Clash%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE%E7%9A%84%E4%B8%80%E6%AC%A1%E8%AE%B0%E5%BD%95/","content":"Clash自定义规则配置前言体验了一段时间，Clash的分流功能很好用，而且用订阅转换可以很方便的把v2和ssr的订阅链接转换为clash使用。但是也存在一个痛点，个别网站的规则并没有收录于在线规则列表中，需要自己本地手动添加；而添加之后，每次更新订阅之前手动写入的规则就会被覆盖掉。本来打算在转换服务器中添加自定义规则，折腾一番发现clash客户端上自带这种功能。\n流程1. 写入自定义规则在Profiles页面找到需要加入特定规则的配置项，第三个图标即为编辑规则打开后会显示前一百条规则，点击左上角的add添加自定义规则DOMAIN-SUFFIX为一级域名匹配，如bilibili.com；DOMAIN为全域名匹配，如pan.baidu.com；DOMAIN-KEYWORD为域名关键词匹配，如baidu可以匹配pan.baidu.com也可以匹配www.baidu.com；编辑完毕后，点击右上角的Add加入规则集，然后点击右上角的Save写入磁盘。\n2. 获取自定义规则代码在Profiles页面找到刚刚加入特定规则的配置项，第一个图标&lt; &gt;即为打开规则文件。打开后按Ctrl+F搜索rules，即可定位指规则集部分。此时规则从第一行至  - DOMAIN-SUFFIX,acl4.ssr,🎯 全球直连的前一行为你的自定义规则条目，将其复制。\n3. 预处理自定义规则打开Clash - Settings - Profiles - Parsers - Edit打开预处理规则之前修改以下代码复制进去  \n\n这是单个配置文件的情况parsers: # array  - url: https://****.***/******  #将这些替换成你的订阅链接    yaml:      prepend-rules:        - DOMAIN-SUFFIX,****.com,🚀 节点选择  #将这些替换成你的规则        - DOMAIN-KEYWORD,****,🚀 节点选择\n如果有多个配置文件，并且订阅链接的域是一样的话，可以使用正则表达式parsers: # array  - reg: https://abcd.xyz.+$  #将abcd.xyz替换成你的订阅链接的相同部分    yaml:      prepend-rules:        - DOMAIN-SUFFIX,****.com,🚀 节点选择  #将这些替换成你的规则        - DOMAIN-KEYWORD,****,🚀 节点选择\n\n点击右下角保存，然后去更新一下订阅的配置文件。可以点击editRules检查一下规则是否确实被写入了。\n"},{"title":"二刺螈萌豚的萌萌图收藏方案","url":"/lilyblessing.github.io/2021/06/20/%E4%BA%8C%E5%88%BA%E8%9E%88%E8%90%8C%E8%B1%9A%E7%9A%84%E8%90%8C%E8%90%8C%E5%9B%BE%E6%94%B6%E8%97%8F%E6%96%B9%E6%A1%88/","content":"肥肥的仓鼠向冻鳗图片处理流程前言每一个喜爱冻鳗游戏的二刺螈肥肥大概都有收集二刺螈萌色图的爱好；俺们二刺螈萌豚一看到萌色图，当场就走不动道了。那么我在此简要的分享下本肥肥的处理流程（进入贤者模式\n1. 所需的工具与项目\n浏览器（推荐Chrome、Edge等chromium内核浏览器，以下均按Edge浏览器配置）\nTampermonkey（类似的）脚本管理器\nEverything 强大的文件索引工具\nHoneyview 简约而不简单的图片浏览工具\nWaifu2x-Extension-GUI Waifu2x基于机器学习的图片近似无损放大工具\nDuplicate photo Finder plus 快速高效的图片去重工具\n\n\n2. 获取来源1. pixiv 日系插画站 深得画师们钟爱 萌豚最主要的色图来源  \n\n如果你恰好有安装过aria2这款下载引擎的话对应的pixiv下载脚本是PixivUserBatchDownload\n如果你没有安装过aria2也不要紧（现在装上也来得及 分别是前后端的Aria2 For Edge和Morix）当然不装也可以 Pixiv专用的下载工具是pixiv-omina \n\n2. twitter 全球最大社交网站之一 关注画师就能第一时间获取各种色图  \n\n推特这边的下载采用浏览器扩展 twitter-media-downloader\n\n3. telegram 图片频道+万能的群友=车来！简单介绍几个图站频道\n\nPIXIV站每日 Top50搬运\nDanbooru【SFW】\nDanbooru【NSFW】\nYandere 【SAFE】\nYandere【NSFW】如上所示Yandere和Danbooru这种图站由于有爬虫自动传telegram就不单独介绍了\n\n3. 整理与筛选不管是Pixiv还是Twitter，找画师空间批量爬取下载之后的图片一定是良莠不齐的这时就需要一个好用的图片文件浏览工具和查看工具了  \n1. Everything作为远超windows文件检索性能的索引工具，仅仅用作图片浏览工具也是非常不错的可以限定大小进行筛选，例：筛选大于1MB的图片可以限定方向筛选，例：筛选所有竖向的图片可以方便的搜索作品ID或者搜索画师作品，例：搜索torino老师的作品\n当然Everything本身并不是仅仅用来处理图片的，还有更多进阶用法，可以自行学习(也许我可能大概应该会单独写一篇讲解Everything的进阶操作，当然更可能直接摸了\n\n2. 蜂蜜浏览器 Honeyview专业的图片查看工具还支持双开页和文件夹跳转，可以作为漫画阅读器\n\n3. Duplicate photo Finder如果你还同时下载了telegram图片频道的合集包，那么就有可能出现部分图片重复用这软件处理图片快速去重，效率很高哦\n\n整理完可以使用Waifu2x对色图进行近似无损放大与降噪，这里使用带图形化界面的Waifu2x-Extension-GUI简单易上手就不多赘述了\n4. 备份与存档当你做完这一系列操作会发现也许可能你的硬盘的空间突然就吃紧了，这时候就该准备上传云盘了首先排除百度云，国内的网盘可以选择万年没翻车的115，也可以选择打着 上传下载不限速 口号的阿里云进行存储海外的云空间可以选择Onedrive和GoogleDrive这种成熟的商业网盘当然，如果你足够Rich也可以选择直接本地局域网搭建一个NAS作为永久存储，堆积你所珍爱的色图们\n\n至此你已经算是一只合格的肥肥仓鼠啦 该摸啦\n"},{"title":"搭建订阅转换服务的一次记录","url":"/lilyblessing.github.io/2021/06/18/%E6%90%AD%E5%BB%BA%E8%AE%A2%E9%98%85%E8%BD%AC%E6%8D%A2%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%B8%80%E6%AC%A1%E8%AE%B0%E5%BD%95/","content":"订阅转换服务前言笔者用的几个机场分别采用了ssr和v2的订阅方案，而这几个客户端无论是win平台还是Android平台，切换起来都太麻烦了；刚好clash现在已经支持ssr了，就打算全部移至clash平台使用。  虽然机场主有提供订阅转换服务，但用公共服务还是多少有点不爽的，于是决定自建一个。\n准备工作\n一台用于安装服务的VPS\ncloudflare托管好的域名\n\n所用到的项目\n前端项目Sub-Web\n后端项目Subconverter\n\n部署流程1. 在cloudflare做好域名解析(记得打开橙色的小云朵,也就是CDN)\n\n前端域名sub.xxxx.com\n后端域名suc.xxxx.com\n\n\n2. 部署前端\n安装开发环境curl -sL https://rpm.nodesource.com/setup_12.x | bash -sudo yum install -y nodejswget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repoyum -y install yarn\n确认版本node -vyarn -v\n拉取 sub-webgit clone https://github.com/CareyWang/sub-web.git &amp;&amp; cd sub-web\n构建依赖项yarn install\n本地开发试运行yarn serve\n防火墙打开8080端口,便可访问http://服务器ip:8080/ 预览确认\n修改配置文件打开/root/sub-web/src/views/Subconverter.vue文件搜索backendOptions: 约在第258行 将http://127.0.0.1:25500/sub?替换为之前cf解析的域名https://suc.xxxx.com/sub?注意这里填写的是后端域名\n更换远程规则打开/root/sub-web/src/views/Subconverter.vue,也就是刚刚那个文件搜索remoteConfig: [，回车一行，复制下方规则粘贴空行&#123;  label: &quot;ACL4SSR&quot;,  options: [    &#123;      label: &quot;ACL4SSR_Online 默认版 分组比较全 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_AdblockPlus 更多去广告 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_NoAuto 无自动测速 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_NoReject 无广告拦截规则 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Mini 精简版 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Full 全分组 重度用户使用 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量 (与Github同步)&quot;,      value:        &quot;https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR 本地 默认版 分组比较全&quot;,      value: &quot;config/ACL4SSR.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Mini 本地 精简版&quot;,      value: &quot;config/ACL4SSR_Mini.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速&quot;,      value: &quot;config/ACL4SSR_Mini_NoAuto.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback&quot;,      value: &quot;config/ACL4SSR_Mini_Fallback.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_BackCN 本地 回国&quot;,      value: &quot;config/ACL4SSR_BackCN.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_NoApple 本地 无苹果分流&quot;,      value: &quot;config/ACL4SSR_NoApple.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_NoAuto 本地 无自动测速 &quot;,      value: &quot;config/ACL4SSR_NoAuto.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_NoAuto_NoApple 本地 无自动测速&amp;无苹果分流&quot;,      value: &quot;config/ACL4SSR_NoAuto_NoApple.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_NoMicrosoft 本地 无微软分流&quot;,      value: &quot;config/ACL4SSR_NoMicrosoft.ini&quot;    &#125;,    &#123;      label: &quot;ACL4SSR_WithGFW 本地 GFW列表&quot;,      value: &quot;config/ACL4SSR_WithGFW.ini&quot;    &#125;  ]&#125;,\n打包发布先停止试运行站点Ctrl+C 然后开始打包程序（会消耗一会时间，建议开screen运行）cd sub-webyarn build\n执行完毕后，会在 /root/sub-web 下面会生成一个 dist 目录，这个目录即为网页的发布目录。\n放入网站目录配置SSL等（由于静态网页运行所以测试开的端口8080可以关闭了）\n\n\n3. 部署后端\n拉取后端程序cd /root/wget https://github.com/tindy2013/subconverter/releases/download/v0.6.3/subconverter_linux64.tar.gztar -zxvf subconverter_linux64.tar.gzcd subconverter/\n修改配置文件打开/root/subconverter/pref.ini文件 搜索配置项并修改api_access_token=123456789abcdefg     \t       #随意设置自己知道就行managed_config_prefix=https://suc.*******.com    #设置成我们刚刚解析的后端域名listen=127.0.0.1                  \t\t       #这里改成 127.0.0.1 进行反代port=25500 \t\t\t\t\t\t\t\t\t  #这里是后端要使用的端口号，随意更改，记得防火墙放行\n设置服务启动项打开/etc/systemd/system目录 创建sub.service文件 写入[Unit]Description=Subscription Convert APIAfter=network.target[Service]Type=simpleExecStart=/root/subconverter/subconverterWorkingDirectory=/root/subconverterRestart=alwaysRestartSec=10[Install]WantedBy=multi-user.target\n检查运行状态以及设置开机自启systemctl daemon-reloadsystemctl start subsystemctl enable subsystemctl status sub\n然后为后端域名设置反代localhost:25500(默认端口没改变的话)状态无误可访问域名 https://suc.*****.com/测试\n\n\n至此搭建完毕\n"},{"title":"配置Mosh的一次记录","url":"/lilyblessing.github.io/2021/06/17/%E9%85%8D%E7%BD%AEMosh%E7%9A%84%E4%B8%80%E6%AC%A1%E8%AE%B0%E5%BD%95/","content":"使用mosh来优化ssh连接笔者日常使用的是广电网，极其不稳定的网络连接导致一个网络波动就能掉线。由于SSH采用不可持续的连接，当网络出现波动时，SSH断开会导致当前正在运行的服务中断，对工作产生非常大的影响。无意间知道了Mosh这个东西，安装使用下，发现网络波动这种事情不会导致服务器连接断开了，特意查了下，原来Mosh使用的是UDP方式传输：虽然也支持使用SSH配置进行认证登录，但是数据传输本身是使用UDP方式的，Mosh支持在会话中断时，不会立即退出，而是启用一个计时器，当网络恢复后会自动连接，同时会延续之前的会话，不会重新开启一个。实在是帮大忙了。\n安装mosh1. 在服务器端安装安装以笔者使用的CentOS7系统为例\n$ yum install -y epel-release$ yum install -y mosh \n\nmosh使用的默认端口号UDP的60000-61000，很明显这个范围太大了，不合适也不安全。我们只放行60000-60010区间的udp端口即可。\n\n如果是iptables$ iptables -I INPUT 1 -p udp --dport 60000:60010 -j ACCEPT\n如果是firewall$ firewall-cmd --permanent --zone=public --add-port=60000-60010/udp\n\n2. 在客户端使用\n如果默认端口号22没有改变，则只需要将原ssh改为mosh，mosh会自动接管ssh的配置(因此原ssh所用的端口号不能关闭)\n\n$ mosh root@192.168.**.**\n\n\n如果ssh默认端口号改变了，就需要指定端口号，这里ssh端口号为123\n\n$ mosh --ssh=&quot;ssh -p 123&quot; root@192.168.**.**\n\n\n只开启了一个或者几个mosh端口，需要指定端口号mosh端口号\n\n$ mosh -p 60010 --ssh=&quot;ssh -p 123&quot; root@192.168.**.**\n\n\n不用密码使用秘钥登录 需要将服务器与本机的密钥的目录写好\n\nmosh -p 60010 --ssh=&quot;/usr/bin/ssh -i /home/ivo/.ssh/id_rsa&quot; root@192.168.**.**\n\n这里推荐一个终端 FluentTerminal这个终端采用fluent设计，界面很美观，而且原生支持mosh连接，感兴趣的朋友可以自行安装体验\n"}]